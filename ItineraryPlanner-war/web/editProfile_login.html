<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="WEB-INF/css/navbarSidebarModal.css">
</head>



<div class="topnav">
    <div class="dropdown" style="float:right; padding-top:20px; padding-right:300px">
        <button class="dropbtn">Settings</button>
        <div class="dropdown-content">
            <a href="#">Edit Profile</a>
            <a href="#">Log Out</a>
        </div>
    </div>

    <img src="./WEB-INF/css/logo.jpg" width="175">
    <div class="topnav-btn" style="float:right; display: flex; align-items: center">
        <img src="WEB-INF/css/icon.jpg">
        <span id="userName"></span>
    </div>
    <div style="float: right; align-items: center">
    </div>
</div>

<div class="sidenav">
    <a href="#">Home</a>
    <a href="#">My Itinerary</a>
    <a href="#">Search Itinerary</a>

</div>
<form id="myform" style="float:right; padding-right:205px;">
    <table id="itineraryTable" class="display" style="width:100%"></table>
</form>        
</body>
<div class="main">
    <form id="myform">
        <label for="userName">Username</label>
        <input type="text" id="userName" placeholder="Username" />
        <br>
        <label for="password_1">Password</label>
        <input type="password" id="password_1" placeholder="Password" />
        <br>
        <label for="password_2">Confirm Password</label>
        <input type="password" id="password_2" placeholder="Confirm Password" />
        <br>
        <label for="description">Description</label>
        <input type="text" id="description" placeholder="Description" />                        
        <br>
        <input type="submit" id="update" value="Update Profile"/>

    </form>
</div>

<script>
    uId = sessionStorage.getItem('uId')

    $(document).ready(function () {
        $.get('http://localhost:8080/ItineraryPlanner-war/webresources/users/'+ uId +'/' + uId, function (data) {
            $("#firstName").val(data.firstName);
            $("#lastName").val(data.lastName);
            $("#userName").val(data.userName);
            $("#password_1").val(data.password);
            $("#email").val(data.email);
            $("#description").val(data.description);
            $("#instaURL").val(data.instaURL);
            $("#blogURL").val(data.blogURL);
        });

        $('#myform').submit(function () {
            var currentDate = new Date();
            console.log("SSV")
           // if("#password_1".val() === "#password_2".val()){
                console.log("VV")
                var body = JSON.stringify({
                    "id": uId,
                    "firstName": $("#firstName").val(),
                    "lastName": $("#lastName").val(),
                    "userName": $("#userName").val(),
                    "password": $("#password_1").val(),
                    "email": $("#email").val(),
                    "description": $("#description").val(),
                    "birthday": new Date($("#birthday").val()),
                    "instaURL": $("#instaURL").val(),
                    "blogURL": $("#blogURL").val(),
                    "createdDate": currentDate
                })
                console.log(body)

                $.ajax({
                    type: "PUT",
                    url: 'http://localhost:8080/ItineraryPlanner-war/webresources/users/' + uId,
                    data: body,
                    contentType: "application/json; charset=utf-8",
                    success: function (data, textStatus, xhr)
                    {
                        console.log("Response: ", data)
                        console.log(textStatus)
                    },
                    error: function (xhr, error, errorType) {
                        console.log(body)
                        console.log(error);
                    }
                    });
            
            //} else {
                console.log("AA")
                //alert("Password mismatch!")
           // }    
            return false;
        });

    });
</script>